<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PGN Trainer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
  <link rel="stylesheet" href="/chess/css/chessboard-arrows.css">
  <script src="/chess/js/chessboard-arrows.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mliebelt/pgn-parser@1.4.15/lib/index.umd.min.js"></script>

  <script type="module" src="/chess/js/tsr.js"></script>
  <script src="/chess/js/trainer-tracking.js"></script>
  <link rel="stylesheet" href="/chess/css/styles.css">
  <script src="/chess/js/main.js" defer></script>
</head>
<body>

  <h1>PGN Trainer (TSR Style)</h1>
  <button id="reset-btn" onclick="resetStats()" >Reset Stats</button>

  <div id="backup-controls">
    <button id="download-btn" onclick="downloadStats()">⬇️ Download Stats</button>
    <label id="upload-label">
      ⬆️ Upload Stats
      <input type="file" id="upload-input" onchange="uploadStats(event)" accept=".json">
    </label>
  </div>
  <div id="board_wrapper">
    <!-- <canvas id="primary_canvas" width="392" height="392" ></canvas>
    <canvas id="drawing_canvas"  width="392" height="392" ></canvas> -->
    <div id="board"></div>
</div>

  <div class="stats-container" >
    <!-- <p for="stats-prev">Last Move:</p><br> -->
    <div id="stats-prev" class="stats-box stats-prev"></div>
    <!-- <p for="stats-box">Current Move:</p><br> -->
    <div id="stats-box" class="stats-box stats-current"></div>
  </div>


  <p><strong>Status:</strong> <span id="status">Paste a PGN and click Start</span></p>
  <label for="pgn-selector">Load PGN:</label>
<select id="pgn-selector">
  <option disabled selected>Select a PGN</option>
</select>
<button onclick="loadSelectedPGN()">Load</button>
  

<br>  
  <textarea id="pgn-input" placeholder="Paste PGN here..."></textarea>
  <br><br>
  <label for="color-select">Train as:</label>
  <select id="color-select">
    <option value="white" selected>White</option>
    <option value="black">Black</option>
  </select>
  <br>

  <label for="tsr-lines">Lines to train:</label>
  <input type="range" id="tsr-lines" min="4" max="20" value="8" />
  <span id="tsr-lines-value">8</span>
  <br><br>
  <button onclick="startTrainer()">Start Trainer</button>


  <script>
    const tsrSlider = document.getElementById("tsr-lines");
    const tsrDisplay = document.getElementById("tsr-lines-value");
  
    tsrSlider.addEventListener("input", () => {
      tsrDisplay.textContent = tsrSlider.value;
    });
  </script>
</body>

</html>
